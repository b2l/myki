// Settings for vim editor
// vim: set softtabstop=4
// vim: set tabstop=4

@import "compass";
@import "color";
@import "typo";
@import "tools";
@import "menu";

$main-menu-spacing: 25px;

@import "main-menu/*.png";

html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    min-height: 100%;
    width: 100%;
}

.topbar {
    background: $black;
    height: 40px;
    position: relative;
    z-index: 1;
    @include box-shadow(0 2px 2px 2px rgba(0, 0, 0, 0.75));

    .title {
        margin: 0;
        padding: 0 0 0 10px ;
        display: inline-block;
        color: $mainOrange;
    }

    .pull-right a {
        color: white;
        margin-right: 10px;
    }
}

.wrapper {
    display: block;
    position: absolute;
    top: 40px;
    right: 0;
    bottom: 0;
    left: 0;
}

.content-wrapper {
    display: table;
    width: 100%;
    height: 100%;
    min-height: 100%;
    table-layout: fixed;
}

$sidebar1-width: 90px;
$sidebar2-width: 220px;

.main-menu {
    width: $sidebar1-width;
    background: $mainOrange;
}


.second-menu {
    width: $sidebar2-width;
    background: $softWhite;
    @include box-shadow(-2px 2px 2px rgba(0, 0, 0, .40));
    padding-left: 10px;

    .page {

        a {
            font-size: 16px;
            color: $black;
            font-weight: normal;
            text-decoration: none;
            display: block;
            height: 24px;

        }

        &.active {
            position: relative;
            z-index: 1;

            &:after {
                @include main-menu-sprite(fleche-page);
                width: main-menu-sprite-width(fleche-page);
                height: main-menu-sprite-height(fleche-page);
                content: "";
                display: block;
                margin-left: 20px;
                position: absolute;
                right: -2px;
                top: -5px;
            }

            a {
                color: $mainBlue;

            }
        }
    }
}

.main-content {
//    position: relative;
    background: #fff;

    @include box-shadow(-2px 2px 2px rgba(0, 0, 0, .40));

    .content {
        padding: 10px;
    }
}

.toolbar {
    padding: 10px 10px 0;
    overflow: auto;

    .title {
        display: inline-block;

    }
}


$main-menu-items: 'home', 'settings';

@each $item in $main-menu-items {
    .#{$item} {
        &:before {
            @include main-menu-sprite(#{$item});
            width: main-menu-sprite-width(#{$item});
            height: main-menu-sprite-height(#{$item});
            content: "";
            display: block;
            margin-left: 35px;
        }


        &.active:before {
            @include main-menu-sprite(#{$item}_hover);
        }
    }
}

.main-menu-item {
    margin: 10px 0 0 0;

    .active {
        position: relative;

        &:after {
            @include main-menu-sprite(fleche);
            width: main-menu-sprite-width(fleche);
            height: main-menu-sprite-height(fleche);
            content: "";
            display: block;
            margin-left: 20px;
            position: absolute;
            right: -2px;
            top: 0;
        }
    }
}

.main-menu-item a {
    display: block;
    text-align: center;
    color: black;
    text-decoration: none;

    opacity: 0.6;

    &:hover {
        opacity: 1;
    }

    &.active {
        color: $mainBlue;
        opacity: 1;
    }
}

/* ICON */
@mixin image-replace($spriteName) {
    @include main-menu-sprite($spriteName);
    padding-top: main-menu-sprite-height($spriteName);
    width: main-menu-sprite-width($spriteName);
    @extend ._image-replace;
}

._image-replace {
    @include hide-text();
    display: inline-block;
    height: 0;
}

.icon {
    margin-left: 5px;
}

.icon-edit {
    @include image-replace(edit);
}

.icon-save {
    @include image-replace(save);
}

.icon-preview {
    @include image-replace(preview);
}

.logout {
    @include image-replace(logout);
    margin-top: 10px;
}


/* Editeur / preview */
$toolbarHeight: 30px;

.toolbar {
    top: 0;
    height: $toolbarHeight;
}
.content {
    position: absolute;
    top: $toolbarHeight + 10;
    bottom: 0;
    right: 0;
    left: $sidebar2-width + $sidebar1-width + 10; 
    @include box-sizing(border-box);
}

$heightWithMarge: 44%;

.with-preview {
    .content {
        bottom: auto;
        height: $heightWithMarge; 
    }
    .preview {
        position: absolute;
        bottom: 0;
        height: $heightWithMarge; 
    }
}



.content {
    border: 1px solid $mainOrange;
    overflow: auto;
    margin: 10px;
}
.preview {
    border: 1px solid $mainOrange;
    background: $softWhite;
    margin: 10px;
    padding: 10px;
    overflow: auto;
    @include box-sizing(border-box);
}

.content .CodeMirror {
    height: auto;

    .CodeMirror-vscrollbar {
        overflow: hidden;
    }
}
/* Editor view */

// Title edit in place
.title {
    .show {
        padding: 3px;

        &:hover {
            border: 1px solid $mainBlue;
            padding: 2px;
        }
    }

    .edit {
        display: none;
    }

    &.editing {
        .show {
            display: none;
        }

        .edit {
            display: inline-block;
        }
    }
}
